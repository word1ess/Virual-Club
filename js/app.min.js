(()=>{"use strict";function e(t){let s=0;s=t.target.duration;let i=0,n=s;function d(){const e=n/s;return e-1/s*(1-e)}setInterval((()=>{i=i+=1,n=s-i,function(){let e=`${(250*d()).toFixed(0)} 250`;if(250*d()<0)return e="0 250",void(document.getElementById("timer").innerHTML="");document.getElementById("base-timer-path-remaining").setAttribute("stroke-dasharray",e)}()}),1e3),document.getElementById("timer").innerHTML='\n  <div class="base-timer">\n    <svg class="base-timer__svg" viewBox="0 0 105 100" xmlns="http://www.w3.org/2000/svg">\n      <g class="base-timer__circle">\n        <path id="base-timer-path-remaining" stroke-dasharray="250" class="base-timer__path-remaining"\n          d=" \n            M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0"></path>\n      </g>\n    </svg>\n  </div>',window.screen.width<1500&&(document.getElementById("timer").innerHTML='\n    <div class="base-timer">\n      <svg class="base-timer__svg" viewBox="0 0 96 100" xmlns="http://www.w3.org/2000/svg">\n        <g class="base-timer__circle">\n          <path id="base-timer-path-remaining" stroke-dasharray="250" class="base-timer__path-remaining"\n            d=" M 50, 50\n              m -45, 0\n              a 45,45 0 1,0 90,0\n              a 45,45 0 1,0 -90,0"></path>\n        </g>\n      </svg>\n    </div>'),window.screen.width<1280&&(document.getElementById("timer").innerHTML='\n    <div class="base-timer">\n      <svg class="base-timer__svg" viewBox="0 0 78 100" xmlns="http://www.w3.org/2000/svg">\n        <g class="base-timer__circle">\n          <path id="base-timer-path-remaining" stroke-dasharray="250" class="base-timer__path-remaining"\n            d=" M 50, 50\n              m -45, 0\n              a 45,45 0 1,0 90,0\n              a 45,45 0 1,0 -90,0"></path>\n        </g>\n      </svg>\n    </div>'),this.removeEventListener("play",e)}Array.from(document.querySelectorAll(".stories__video")).forEach((t=>{console.log(t),t.play().then((s=>{t.pause(),t.play(),t.addEventListener("play",e)})).catch((s=>{t.innerHTML="не загружается: "+s,t.oncanplay=()=>{t.play(),t.addEventListener("play",e)}}))}));class t{constructor(e,t){this.slide=document.querySelector(`[data-slide="${e}"]`),this.active=0,this.init(t)}activeSlide(e){this.active=e,this.items.forEach((e=>e.classList.remove("active"))),this.items[e].classList.add("active"),this.thumbItems.forEach((e=>e.classList.remove("active"))),this.thumbItems[e].classList.add("active"),this.autoSlide()}prev(){this.active>0?this.activeSlide(this.active-1):this.activeSlide(this.items.length-1)}next(){this.active<this.items.length-1?this.activeSlide(this.active+1):this.activeSlide(0)}addNavigation(){const e=this.slide.querySelector(".slide-next"),t=this.slide.querySelector(".slide-prev"),s=this.slide.querySelector(".slide-arrow-next"),i=this.slide.querySelector(".slide-arrow-prev");e.addEventListener("click",this.next),t.addEventListener("click",this.prev),s.addEventListener("click",this.next),i.addEventListener("click",this.prev)}addThumbItems(){this.items.forEach((()=>this.thumb.innerHTML+="<span></span>")),this.thumbItems=Array.from(this.thumb.children)}autoSlide(){clearTimeout(this.timeout),this.timeout=setTimeout(this.next,5e3)}init(e){this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.items=this.slide.querySelectorAll(".slide-items > *"),this.thumb=this.slide.querySelector(".slide-thumb"),this.addThumbItems(),this.activeSlide(e),this.addNavigation()}}const s=Array.from(document.querySelectorAll("#stories-item")),i=document.querySelector("#slider-stories"),n=document.querySelector("#stories-items"),d=document.querySelector(".slide-thumb");function a(e){let d=s.indexOf(this);n.parentNode.classList.add("active"),i.classList.add("active"),s.forEach((e=>{let t=e.cloneNode(!0);t.appendChild(function(e){let t=document.createDocumentFragment(),s=document.createElement("h3"),i=document.createElement("DIV"),n=document.createElement("DIV"),d=document.createElement("DIV"),a=document.createElement("DIV");i.classList.add("products-slider","swiper"),n.classList.add("swiper-wrapper"),d.classList.add("products-slider-prev","swiper-button-prev"),a.classList.add("products-slider-next","swiper-button-next");for(let e=0;e<6;e++){let e=document.createElement("DIV"),t=document.createElement("DIV"),s=document.createElement("DIV"),i=document.createElement("DIV"),d=document.createElement("DIV"),a=document.createElement("DIV"),r=document.createElement("DIV");e.classList.add("products-slider__item","swiper-slide"),a.classList.add("swiper-button-prev"),r.classList.add("swiper-button-next"),t.classList.add("products-slider__img"),s.classList.add("products-slider__content"),i.classList.add("products-slider__bottom"),d.classList.add("products-slider__prices");let c=document.createElement("h3"),l=document.createElement("p"),o=document.createElement("p"),m=document.createElement("button"),h=document.createElement("img");c.textContent="Очки виртуальной реальности HIPER VR Max, черный ",l.textContent="4 290 ₽",o.textContent="3 940 ₽",h.src="../img/product-slider/1.png",c.classList.add("products-slider__title"),l.classList.add("products-slider__old"),o.classList.add("products-slider__new"),m.classList.add("products-slider__cart"),d.appendChild(l),d.appendChild(o),i.appendChild(d),i.appendChild(m),s.appendChild(c),s.appendChild(i),t.appendChild(h),e.appendChild(t),e.appendChild(s),n.appendChild(e)}return i.appendChild(n),i.appendChild(d),i.appendChild(a),s.classList.add("stories__subtitle"),s.textContent="Очки виртуальной реальности HIPER VR Max, черный",t.appendChild(s),t.appendChild(i),new Swiper(".products-slider",{loop:!0,slidesPerView:1.3,direction:"horizontal",spaceBetween:4,navigation:{prevEl:".products-slider-prev",nextEl:".products-slider-next"}}),t}()),n.appendChild(t.cloneNode(!0))})),new t("slide",d),i.addEventListener("click",r)}function r(e){e.target.classList.contains("slider-stories")&&(i.classList.remove("active"),n.innerHTML="",d.innerHTML="")}s.forEach((e=>{e.addEventListener("click",a)}))})();
