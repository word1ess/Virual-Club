(()=>{"use strict";const e=Array.from(document.querySelectorAll(".stories__video")).map((e=>new Plyr(e,{title:"VR",controls:[],volume:0,muted:!0})));function t(e,s){let i=e.duration;i=s;let n=0,d=i;function a(){const e=d/i;return e-1/i*(1-e)}setInterval((()=>{n=n+=1,d=i-n,function(){let e=`${(250*a()).toFixed(0)} 250`;if(250*a()<0)return e="0 250",void(document.getElementById("timer").innerHTML="");document.getElementById("base-timer-path-remaining").setAttribute("stroke-dasharray",e)}()}),1e3),document.getElementById("timer").innerHTML='\n  <div class="base-timer">\n    <svg class="base-timer__svg" viewBox="0 0 105 100" xmlns="http://www.w3.org/2000/svg">\n      <g class="base-timer__circle">\n        <path id="base-timer-path-remaining" stroke-dasharray="250" class="base-timer__path-remaining"\n          d=" \n            M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0"></path>\n      </g>\n    </svg>\n  </div>',window.screen.width<1500&&(document.getElementById("timer").innerHTML='\n    <div class="base-timer">\n      <svg class="base-timer__svg" viewBox="0 0 96 100" xmlns="http://www.w3.org/2000/svg">\n        <g class="base-timer__circle">\n          <path id="base-timer-path-remaining" stroke-dasharray="250" class="base-timer__path-remaining"\n            d=" M 50, 50\n              m -45, 0\n              a 45,45 0 1,0 90,0\n              a 45,45 0 1,0 -90,0"></path>\n        </g>\n      </svg>\n    </div>'),window.screen.width<1280&&(document.getElementById("timer").innerHTML='\n    <div class="base-timer">\n      <svg class="base-timer__svg" viewBox="0 0 78 100" xmlns="http://www.w3.org/2000/svg">\n        <g class="base-timer__circle">\n          <path id="base-timer-path-remaining" stroke-dasharray="250" class="base-timer__path-remaining"\n            d=" M 50, 50\n              m -45, 0\n              a 45,45 0 1,0 90,0\n              a 45,45 0 1,0 -90,0"></path>\n        </g>\n      </svg>\n    </div>'),e.off("play",t)}if(e.forEach((e=>{e.on("ready",(()=>{e.play()})),e.restart(),e.play(),e.on("play",t(e,e.duration))})),e[0])for(let t=0;t<e.length;t++){let s=e[t].duration;e[0].play(),setTimeout((()=>{}),1e3*s)}class s{constructor(e,t){this.slide=document.querySelector(`[data-slide="${e}"]`),this.active=0,this.init(t)}activeSlide(e){this.active=e,this.items.forEach((e=>e.classList.remove("active"))),this.items[e].classList.add("active"),this.thumbItems.forEach((e=>e.classList.remove("active"))),this.thumbItems[e].classList.add("active"),this.autoSlide()}prev(){this.active>0?this.activeSlide(this.active-1):this.activeSlide(this.items.length-1)}next(){this.active<this.items.length-1?this.activeSlide(this.active+1):this.activeSlide(0)}addNavigation(){const e=this.slide.querySelector(".slide-next"),t=this.slide.querySelector(".slide-prev"),s=this.slide.querySelector(".slide-arrow-next"),i=this.slide.querySelector(".slide-arrow-prev");e.addEventListener("click",this.next),t.addEventListener("click",this.prev),s.addEventListener("click",this.next),i.addEventListener("click",this.prev)}addThumbItems(){this.items.forEach((()=>this.thumb.innerHTML+="<span></span>")),this.thumbItems=Array.from(this.thumb.children)}autoSlide(){clearTimeout(this.timeout),this.timeout=setTimeout(this.next,5e3)}init(e){this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.items=this.slide.querySelectorAll(".slide-items > *"),this.thumb=this.slide.querySelector(".slide-thumb"),this.addThumbItems(),this.activeSlide(e),this.addNavigation()}}const i=Array.from(document.querySelectorAll("#stories-item")),n=document.querySelector("#slider-stories"),d=document.querySelector("#stories-items"),a=document.querySelector(".slide-thumb");function r(e){let t=i.indexOf(this);d.parentNode.classList.add("active"),n.classList.add("active"),i.forEach((e=>{let t=e.cloneNode(!0);t.appendChild(function(e){let t=document.createDocumentFragment(),s=document.createElement("h3"),i=document.createElement("DIV"),n=document.createElement("DIV"),d=document.createElement("DIV"),a=document.createElement("DIV");i.classList.add("products-slider","swiper"),n.classList.add("swiper-wrapper"),d.classList.add("products-slider-prev","swiper-button-prev"),a.classList.add("products-slider-next","swiper-button-next");for(let e=0;e<6;e++){let e=document.createElement("DIV"),t=document.createElement("DIV"),s=document.createElement("DIV"),i=document.createElement("DIV"),d=document.createElement("DIV"),a=document.createElement("DIV"),r=document.createElement("DIV");e.classList.add("products-slider__item","swiper-slide"),a.classList.add("swiper-button-prev"),r.classList.add("swiper-button-next"),t.classList.add("products-slider__img"),s.classList.add("products-slider__content"),i.classList.add("products-slider__bottom"),d.classList.add("products-slider__prices");let l=document.createElement("h3"),c=document.createElement("p"),o=document.createElement("p"),m=document.createElement("button"),h=document.createElement("img");l.textContent="Очки виртуальной реальности HIPER VR Max, черный ",c.textContent="4 290 ₽",o.textContent="3 940 ₽",h.src="../img/product-slider/1.png",l.classList.add("products-slider__title"),c.classList.add("products-slider__old"),o.classList.add("products-slider__new"),m.classList.add("products-slider__cart"),d.appendChild(c),d.appendChild(o),i.appendChild(d),i.appendChild(m),s.appendChild(l),s.appendChild(i),t.appendChild(h),e.appendChild(t),e.appendChild(s),n.appendChild(e)}return i.appendChild(n),i.appendChild(d),i.appendChild(a),s.classList.add("stories__subtitle"),s.textContent="Очки виртуальной реальности HIPER VR Max, черный",t.appendChild(s),t.appendChild(i),new Swiper(".products-slider",{loop:!0,slidesPerView:1.3,direction:"horizontal",spaceBetween:4,navigation:{prevEl:".products-slider-prev",nextEl:".products-slider-next"}}),t}()),d.appendChild(t.cloneNode(!0))})),new s("slide",t),n.addEventListener("click",l)}function l(e){e.target.classList.contains("slider-stories")&&(n.classList.remove("active"),d.innerHTML="",a.innerHTML="")}i.forEach((e=>{e.addEventListener("click",r)}))})();