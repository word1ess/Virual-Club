(()=>{"use strict";const e=Array.from(document.querySelectorAll(".stories-collection__video")).map((e=>new Plyr(e,{title:"VR",controls:[],volume:0,muted:!0})));function t(e,s){let i=e.duration;i=s;let r=0,n=i;function d(){const e=n/i;return e-1/i*(1-e)}setInterval((()=>{r=r+=1,n=i-r,function(){let e=`${(250*d()).toFixed(0)} 283`;if(283*d()<0)return e="0 283",void(document.getElementById("stories-collection__timer").innerHTML="");document.getElementById("base-timer-path-remaining").setAttribute("stroke-dasharray",e)}()}),1e3),document.getElementById("stories-collection__timer").innerHTML='\n  <div class="base-timer">\n    <svg class="base-timer__svg" viewBox="0 0 105 100" xmlns="http://www.w3.org/2000/svg">\n      <g class="base-timer__circle">\n        <path id="base-timer-path-remaining" stroke-dasharray="283" class="base-timer__path-remaining"\n          d=" \n            M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0"></path>\n      </g>\n    </svg>\n  </div>',window.screen.width<1500&&(document.getElementById("stories-collection__timer").innerHTML='\n    <div class="base-timer">\n      <svg class="base-timer__svg" viewBox="0 0 96 100" xmlns="http://www.w3.org/2000/svg">\n        <g class="base-timer__circle">\n          <path id="base-timer-path-remaining" stroke-dasharray="283" class="base-timer__path-remaining"\n            d=" M 50, 50\n              m -45, 0\n              a 45,45 0 1,0 90,0\n              a 45,45 0 1,0 -90,0"></path>\n        </g>\n      </svg>\n    </div>'),window.screen.width<1280&&(document.getElementById("stories-collection__timer").innerHTML='\n    <div class="base-timer">\n      <svg class="base-timer__svg" viewBox="0 0 78 100" xmlns="http://www.w3.org/2000/svg">\n        <g class="base-timer__circle">\n          <path id="base-timer-path-remaining" stroke-dasharray="283" class="base-timer__path-remaining"\n            d=" M 50, 50\n              m -45, 0\n              a 45,45 0 1,0 90,0\n              a 45,45 0 1,0 -90,0"></path>\n        </g>\n      </svg>\n    </div>'),e.off("play",t)}if(e.forEach((e=>{e.on("ready",(()=>{e.play()})),e.restart(),e.play(),e.on("play",t(e,e.duration))})),e[0])for(let t=0;t<e.length;t++){let s=e[t].duration;e[0].play(),setTimeout((()=>{}),1e3*s)}class s{constructor(e,t){this.slide=document.querySelector(`[data-slide="${e}"]`),this.active=0,this.init(t)}activeSlide(e){this.active=e,this.items.forEach((e=>e.classList.remove("active"))),this.items[e].classList.add("active"),this.thumbItems.forEach((e=>e.classList.remove("active"))),this.thumbItems[e].classList.add("active"),this.autoSlide()}prev(){this.active>0?this.activeSlide(this.active-1):this.activeSlide(this.items.length-1)}next(){this.active<this.items.length-1?this.activeSlide(this.active+1):this.activeSlide(0)}addNavigation(){const e=this.slide.querySelector(".stories-slider__slide-arrow-next"),t=this.slide.querySelector(".stories-slider__slide-arrow-prev"),s=this.slide.querySelector(".stories-slider__slide-next"),i=this.slide.querySelector(".stories-slider__slide-prev");s.addEventListener("click",this.next),i.addEventListener("click",this.prev),e.addEventListener("click",this.next),t.addEventListener("click",this.prev)}addThumbItems(){this.items.forEach((()=>this.thumb.innerHTML+="<span></span>")),this.thumbItems=Array.from(this.thumb.children)}autoSlide(){clearTimeout(this.timeout),this.timeout=setTimeout(this.next,5e3)}init(e){this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.items=this.slide.querySelectorAll(".stories-slider__slide-items > *"),this.thumb=this.slide.querySelector(".stories-slider__slide-thumb"),this.addThumbItems(),this.activeSlide(e),this.addNavigation()}}const i=Array.from(document.querySelectorAll("#stories-item")),r=document.querySelector("#stories-slider__controls"),n=document.querySelector("#stories-slider__slide-items"),d=document.querySelector(".stories-slider__slide-thumb");function l(e){let t=i.indexOf(this);n.parentNode.classList.add("active"),r.classList.add("active"),i.forEach((e=>{let t=e.cloneNode(!0),s=t.querySelector(".stories-collection__stories");t.removeChild(s),t.appendChild(function(e,t){let s=document.createDocumentFragment(),i=document.createElement("h3");i.classList.add("stories-story__title"),i.textContent=e.querySelector(".stories-story__title").innerHTML,s.appendChild(i);let r=document.createElement("h4");if(r.classList.add("stories-story__text"),r.textContent=e.querySelector(".stories-story__text").innerHTML,s.appendChild(r),e.querySelector(".stories-story__product-slide")){let t=document.createElement("DIV"),i=document.createElement("DIV"),r=document.createElement("DIV"),n=document.createElement("DIV"),d=Array.from(e.querySelectorAll(".stories-story__product-slide"));t.classList.add("products-slider","swiper"),i.classList.add("swiper-wrapper"),r.classList.add("products-slider-prev","swiper-button-prev"),n.classList.add("products-slider-next","swiper-button-next");for(let e=0;e!=d.length;e++){let t=document.createElement("DIV"),s=document.createElement("DIV"),r=document.createElement("DIV"),n=document.createElement("DIV"),l=document.createElement("DIV"),a=document.createElement("DIV"),o=document.createElement("DIV");t.classList.add("products-slider__item","swiper-slide"),a.classList.add("swiper-button-prev"),o.classList.add("swiper-button-next"),s.classList.add("products-slider__img"),r.classList.add("products-slider__content"),n.classList.add("products-slider__bottom"),l.classList.add("products-slider__prices");let c=document.createElement("h3"),m=document.createElement("p"),h=document.createElement("p"),p=document.createElement("button"),u=document.createElement("img");c.textContent=d[e].querySelector(".stories-story__product-slide__title").innerHTML,m.textContent=d[e].querySelector(".stories-story__product-slide__price-old").innerHTML,h.textContent=d[e].querySelector(".stories-story__product-slide__price-new").innerHTML,u.src=d[e].querySelector("img").src,c.classList.add("stories-story__product-slide__title"),m.classList.add("stories-story__product-slide__price-old"),h.classList.add("stories-story__product-slide__price-new"),p.classList.add("products-slider__cart"),l.appendChild(m),l.appendChild(h),n.appendChild(l),n.appendChild(p),r.appendChild(c),r.appendChild(n),s.appendChild(u),t.appendChild(s),t.appendChild(r),i.appendChild(t)}t.appendChild(i),t.appendChild(r),t.appendChild(n),s.appendChild(t),new Swiper(".products-slider",{loop:!0,slidesPerView:1,direction:"horizontal",spaceBetween:4,navigation:{prevEl:".products-slider-prev",nextEl:".products-slider-next"}})}else t.classList.add("text-bottom");return s}(s,t)),n.appendChild(t.cloneNode(!0))})),new s("stories-slider__slide",t),r.addEventListener("click",a)}function a(e){e.target.classList.contains("stories-slider__controls")&&(r.classList.remove("active"),n.innerHTML="",d.innerHTML="")}i.forEach((e=>{e.addEventListener("click",l)}))})();