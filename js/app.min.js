/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\nconst videoFromStories = Array.from(\r\n  document.querySelectorAll(\".stories__video\")\r\n);\r\n\r\nvideoFromStories.forEach((video) => {\r\n  let videoPlay = video.play();\r\n  // когда видео готово к воспроизведению\r\n  videoPlay\r\n    .then((_) => {\r\n      video.pause();\r\n      video.play();\r\n      video.addEventListener(\"play\", timerForVideo);\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"не загружается: \" + error);\r\n    });\r\n  // setTimeout(() => {}, video.duration);\r\n});\r\n\r\nfunction timerForVideo(e) {\r\n  let timeLimit = 0;\r\n  timeLimit = e.target.duration;\r\n\r\n  let timePassed = 0;\r\n  let timeLeft = timeLimit;\r\n\r\n  const timerInterval = setInterval(() => {\r\n    timePassed = timePassed += 1;\r\n    timeLeft = timeLimit - timePassed;\r\n    setCircleDasharray();\r\n  }, 1000);\r\n  function calculateTimeFraction() {\r\n    const rawTimeFraction = timeLeft / timeLimit;\r\n    return rawTimeFraction - (1 / timeLimit) * (1 - rawTimeFraction);\r\n  }\r\n  function setCircleDasharray() {\r\n    let circleDasharray = `${(283 * calculateTimeFraction()).toFixed(0)} 283`;\r\n    if (283 * calculateTimeFraction() < 0) {\r\n      circleDasharray = `0 283`;\r\n      document.getElementById(\"timer\").innerHTML = ``;\r\n      return;\r\n    }\r\n    document\r\n      .getElementById(\"base-timer-path-remaining\")\r\n      .setAttribute(\"stroke-dasharray\", circleDasharray);\r\n  }\r\n  document.getElementById(\"timer\").innerHTML = `\r\n  <div class=\"base-timer\">\r\n    <svg class=\"base-timer__svg\" viewBox=\"0 0 105 100\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g class=\"base-timer__circle\">\r\n        <path id=\"base-timer-path-remaining\" stroke-dasharray=\"283\" class=\"base-timer__path-remaining\"\r\n          d=\" \r\n            M 50, 50\r\n            m -45, 0\r\n            a 45,45 0 1,0 90,0\r\n            a 45,45 0 1,0 -90,0\"></path>\r\n      </g>\r\n    </svg>\r\n  </div>`;\r\n  if (window.screen.width < 1500) {\r\n    document.getElementById(\"timer\").innerHTML = `\r\n    <div class=\"base-timer\">\r\n      <svg class=\"base-timer__svg\" viewBox=\"0 0 96 100\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <g class=\"base-timer__circle\">\r\n          <path id=\"base-timer-path-remaining\" stroke-dasharray=\"283\" class=\"base-timer__path-remaining\"\r\n            d=\" M 50, 50\r\n              m -45, 0\r\n              a 45,45 0 1,0 90,0\r\n              a 45,45 0 1,0 -90,0\"></path>\r\n        </g>\r\n      </svg>\r\n    </div>`;\r\n  }\r\n  if (window.screen.width < 1280) {\r\n    document.getElementById(\"timer\").innerHTML = `\r\n    <div class=\"base-timer\">\r\n      <svg class=\"base-timer__svg\" viewBox=\"0 0 78 100\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <g class=\"base-timer__circle\">\r\n          <path id=\"base-timer-path-remaining\" stroke-dasharray=\"283\" class=\"base-timer__path-remaining\"\r\n            d=\" M 50, 50\r\n              m -45, 0\r\n              a 45,45 0 1,0 90,0\r\n              a 45,45 0 1,0 -90,0\"></path>\r\n        </g>\r\n      </svg>\r\n    </div>`;\r\n  }\r\n  this.removeEventListener(\"play\", timerForVideo);\r\n}\r\n\r\nclass SlideStories {\r\n  constructor(id, activeSlide) {\r\n    this.slide = document.querySelector(`[data-slide=\"${id}\"]`);\r\n    this.active = 0;\r\n    this.init(activeSlide);\r\n  }\r\n  activeSlide(index) {\r\n    this.active = index;\r\n    this.items.forEach((item) => item.classList.remove(\"active\"));\r\n    this.items[index].classList.add(\"active\");\r\n    this.thumbItems.forEach((item) => item.classList.remove(\"active\"));\r\n    this.thumbItems[index].classList.add(\"active\");\r\n    this.autoSlide();\r\n  }\r\n  prev() {\r\n    if (this.active > 0) {\r\n      this.activeSlide(this.active - 1);\r\n    } else {\r\n      this.activeSlide(this.items.length - 1);\r\n    }\r\n  }\r\n  next() {\r\n    if (this.active < this.items.length - 1) {\r\n      this.activeSlide(this.active + 1);\r\n    } else {\r\n      this.activeSlide(0);\r\n    }\r\n  }\r\n  addNavigation() {\r\n    const nextBtn = this.slide.querySelector(\".slide-next\");\r\n    const prevBtn = this.slide.querySelector(\".slide-prev\");\r\n    const nextBtnArrow = this.slide.querySelector(\".slide-arrow-next\");\r\n    const prevBtnArrow = this.slide.querySelector(\".slide-arrow-prev\");\r\n    nextBtn.addEventListener(\"click\", this.next);\r\n    prevBtn.addEventListener(\"click\", this.prev);\r\n    nextBtnArrow.addEventListener(\"click\", this.next);\r\n    prevBtnArrow.addEventListener(\"click\", this.prev);\r\n  }\r\n  addThumbItems() {\r\n    this.items.forEach(() => (this.thumb.innerHTML += `<span></span>`));\r\n    this.thumbItems = Array.from(this.thumb.children);\r\n  }\r\n  autoSlide() {\r\n    clearTimeout(this.timeout);\r\n    this.timeout = setTimeout(this.next, 5000);\r\n  }\r\n  init(activeSlide) {\r\n    this.next = this.next.bind(this);\r\n    this.prev = this.prev.bind(this);\r\n    this.items = this.slide.querySelectorAll(\".slide-items > *\");\r\n    this.thumb = this.slide.querySelector(\".slide-thumb\");\r\n    this.addThumbItems();\r\n    this.activeSlide(activeSlide);\r\n    this.addNavigation();\r\n  }\r\n}\r\n\r\nconst storiesItems = Array.from(document.querySelectorAll(\"#stories-item\"));\r\nconst sliderContainer = document.querySelector(\"#slider-stories\");\r\nconst slider = document.querySelector(\"#stories-items\");\r\nconst slideThumbs = document.querySelector(\".slide-thumb\");\r\nstoriesItems.forEach((story) => {\r\n  story.addEventListener(\"click\", createSotiresSLider);\r\n});\r\n\r\nfunction createSotiresSLider(e) {\r\n  let index = storiesItems.indexOf(this);\r\n  slider.parentNode.classList.add(\"active\");\r\n  sliderContainer.classList.add(\"active\");\r\n  storiesItems.forEach((story) => {\r\n    let cloneStory = story.cloneNode(true);\r\n    cloneStory.appendChild(createElementsForStory(cloneStory));\r\n    slider.appendChild(cloneStory.cloneNode(true));\r\n  });\r\n  new SlideStories(\"slide\", index);\r\n  sliderContainer.addEventListener(\"click\", removeSlider);\r\n}\r\nfunction removeSlider(e) {\r\n  if (e.target.classList.contains(\"slider-stories\")) {\r\n    sliderContainer.classList.remove(\"active\");\r\n    slider.innerHTML = \"\";\r\n    slideThumbs.innerHTML = \"\";\r\n  }\r\n}\r\nfunction createElementsForStory(parent) {\r\n  let fragment = document.createDocumentFragment();\r\n  let title = document.createElement(\"h3\");\r\n  let slider = document.createElement(\"DIV\");\r\n  let sliderWrapper = document.createElement(\"DIV\");\r\n  let sliderLeftArrow = document.createElement(\"DIV\");\r\n  let sliderRightArrow = document.createElement(\"DIV\");\r\n\r\n  slider.classList.add(\"products-slider\", \"swiper\");\r\n  sliderWrapper.classList.add(\"swiper-wrapper\");\r\n  sliderLeftArrow.classList.add(\"products-slider-prev\", \"swiper-button-prev\");\r\n  sliderRightArrow.classList.add(\"products-slider-next\", \"swiper-button-next\");\r\n  for (let i = 0; i < 6; i++) {\r\n    let sliderItem = document.createElement(\"DIV\");\r\n    let sliderImg = document.createElement(\"DIV\");\r\n    let sliderContent = document.createElement(\"DIV\");\r\n    let sliderBottom = document.createElement(\"DIV\");\r\n    let sliderPriceContainer = document.createElement(\"DIV\");\r\n    let sliderButtonPrev = document.createElement(\"DIV\");\r\n    let sliderButtonNext = document.createElement(\"DIV\");\r\n\r\n    sliderItem.classList.add(\"products-slider__item\", \"swiper-slide\");\r\n    sliderButtonPrev.classList.add(\"swiper-button-prev\");\r\n    sliderButtonNext.classList.add(\"swiper-button-next\");\r\n    sliderImg.classList.add(\"products-slider__img\");\r\n    sliderContent.classList.add(\"products-slider__content\");\r\n    sliderBottom.classList.add(\"products-slider__bottom\");\r\n    sliderPriceContainer.classList.add(\"products-slider__prices\");\r\n\r\n    let sliderContentTitle = document.createElement(\"h3\");\r\n    let sliderOldPrice = document.createElement(\"p\");\r\n    let sliderNewPrice = document.createElement(\"p\");\r\n    let sliderCart = document.createElement(\"button\");\r\n    let sliderImgProduct = document.createElement(\"img\");\r\n    sliderContentTitle.textContent =\r\n      \"Очки виртуальной реальности HIPER VR Max, черный \";\r\n    sliderOldPrice.textContent = \"4 290 ₽\";\r\n    sliderNewPrice.textContent = \"3 940 ₽\";\r\n    sliderImgProduct.src = \"../img/product-slider/1.png\";\r\n\r\n    sliderContentTitle.classList.add(\"products-slider__title\");\r\n    sliderOldPrice.classList.add(\"products-slider__old\");\r\n    sliderNewPrice.classList.add(\"products-slider__new\");\r\n    sliderCart.classList.add(\"products-slider__cart\");\r\n\r\n    sliderPriceContainer.appendChild(sliderOldPrice);\r\n    sliderPriceContainer.appendChild(sliderNewPrice);\r\n\r\n    sliderBottom.appendChild(sliderPriceContainer);\r\n    sliderBottom.appendChild(sliderCart);\r\n\r\n    sliderContent.appendChild(sliderContentTitle);\r\n    sliderContent.appendChild(sliderBottom);\r\n\r\n    sliderImg.appendChild(sliderImgProduct);\r\n\r\n    sliderItem.appendChild(sliderImg);\r\n    sliderItem.appendChild(sliderContent);\r\n\r\n    sliderWrapper.appendChild(sliderItem);\r\n  }\r\n\r\n  slider.appendChild(sliderWrapper);\r\n  slider.appendChild(sliderLeftArrow);\r\n  slider.appendChild(sliderRightArrow);\r\n\r\n  title.classList.add(\"stories__subtitle\");\r\n  title.textContent = \"Очки виртуальной реальности HIPER VR Max, черный\";\r\n\r\n  fragment.appendChild(title);\r\n  fragment.appendChild(slider);\r\n\r\n  const swiper = new Swiper(\".products-slider\", {\r\n    loop: true,\r\n    slidesPerView: 1.3,\r\n    direction: \"horizontal\",\r\n    spaceBetween: 4,\r\n    navigation: {\r\n      prevEl: \".products-slider-prev\",\r\n      nextEl: \".products-slider-next\",\r\n    },\r\n  });\r\n\r\n  return fragment;\r\n}\r\n\n\n//# sourceURL=webpack://tattoo/./src/js/app.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/js/app.js"](0, __webpack_exports__, __webpack_require__);
/******/ 	
/******/ })()
;